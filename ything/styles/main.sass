// vim: shiftwidth=4

$spacing:         16px
$inputs_height:   37px
$preview_width:   256px
$preview_height:  230px
$max_row_thumbs:  4
$thumbs_per_page: 10
$preview_hspace:  ($preview_width + $spacing * 2)
$preview_vspace:  ($preview_height + $spacing * 2)

$background: hsl(240, 27%, 14%)
$inputs: hsl(240, 22%, 5%)
$text: hsl(0, 0, 70%)
$accent: hsl(165, 50%, 50%)
$accent_dark: hsl(165, 50%, 30%)
$accent_good: hsl(140, 50%, 50%)
$accent_bad: hsl(345, 50%, 50%)

$anim_time: 0.125s

html
    font-size: 62.5%
    height: 100%

body
    background: $background
    color: $text
    font-family: Roboto, "Noto Sans", "Droid Sans", Ubuntu, Verdana, sans-serif
    font-size: 1.6rem
    line-height: 120%
    min-height: 100%
    margin: 0
    display: flex
    flex-flow: column nowrap

a
    color: $accent
    text-decoration: none
    transition: color $anim_time

    &:hover
        color: $accent_dark !important

nav
    max-width: 100%
    margin: $spacing

    form
        display: flex
        flex-flow: row nowrap
        justify-content: center

        button[value=""]
            display: none

        input[type="search"]
            padding: $spacing / 2 + 2 $spacing

            &::-webkit-search-decoration,
            &::-webkit-search-cancel-button,
            &::-webkit-search-results-button,
            &::-webkit-search-results-decoration
                display: none

.page-num
    padding: $spacing / 2 $spacing
    background: $inputs
    opacity: 0.8

    &[data-num=""]
        display: none

input, button
    color: $text
    border: 0
    outline: 0
    background: $inputs
    padding: $spacing / 2 $spacing
    border: 1px solid $inputs
    transition: border-color $anim_time, background $anim_time

    &:focus
        border-bottom: 1px solid $accent_dark

    .qutebrowser
        display: none

button:hover
    background: scale-color($inputs, $lightness: +10%)

iframe
    overflow: hidden
    border: 0

.thumb-grid
    display: flex
    flex-flow: row wrap
    align-content: flex-start
    justify-content: flex-start
    margin: 0 auto
    max-width: $preview_hspace

@for $row_thumbs from 2 through $max_row_thumbs
    @media all and (min-width: $preview_hspace * $row_thumbs)
        .thumb-grid
            max-width: $preview_hspace * $row_thumbs

.thumb-wrapper
    margin: $spacing

.thumb-wrapper, .thumb-wrapper iframe
    width: $preview_width
    height: $preview_height

.thumb.placeholder, .thumb-wrapper iframe
    position: absolute

.thumb
    display: block
    width: $preview_width

.thumb .image-wrapper
    width: $preview_width
    position: relative

.thumb img
    width: $preview_width

.thumb-duration
    position: absolute
    bottom: $spacing / 2
    right: $spacing / 4
    color: $text
    background: hsla(0, 0%, 0%, 0.7)
    padding: $spacing / 4 $spacing / 2

.thumb-title
    margin-top: $spacing / 2
    color: $text

    display: -webkit-box
    -webkit-line-clamp: 2
    -webkit-box-orient: vertical;
    overflow: hidden

.thumb-uploader, .thumb-details
    font-size: 1.3rem
    color: $text

.thumb-details
    display: flex
    justify-content: space-between

.icon
    // Kill emoji colors, get nice symbols
    color: transparent
    text-shadow: 0 0 0 $accent

    &.good
        text-shadow: 0 0 0 $accent_good

    &.bad
        text-shadow: 0 0 0 $accent_bad

.video-frame
    width: 100vw
    height: 56.26vw
    max-height: 100vh
    margin-bottom: $spacing

.related-frame
    width: 100%
    height: $preview_vspace * $thumbs_per_page + $inputs_height + $spacing * 2

@for $row_thumbs from 2 through $max_row_thumbs
    @media all and (min-width: $preview_vspace * $row_thumbs)
        .related-frame
            $thumbs: ceil($thumbs_per_page / $row_thumbs)
            height: $preview_vspace * $thumbs + $inputs_height + $spacing * 2

// When thumbnail grids are one column wide
@media all and (max-width: $preview_hspace + $spacing * 2)
    nav
        margin-bottom: 0

        input[type="search"]
            width: 100%

@media all and (min-width: 1280px)
    .watch-body
        flex-flow: row nowrap

        .related-frame
            margin: 0
            width: $preview_hspace + $spacing * 2

            $input_space: $inputs_height + $spacing
            height: $preview_vspace * $thumbs_per_page + $input_space
